<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LGU EEC Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for sidebar if needed */
        .sidebar-active { background-color: #1f2937; color: white; }

        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob { animation: blob 7s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { opacity: 0; animation: fadeInUp 0.8s ease-out forwards; }
    </style>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

    <!-- Login Screen Overlay -->
    <div id="login-screen" class="fixed inset-0 bg-indigo-950 z-[100] hidden overflow-y-auto">
        <div class="min-h-screen w-full flex flex-col items-center py-16 px-4 bg-gradient-to-br from-indigo-950 via-blue-900 to-indigo-900 relative">
            <!-- Animated Background Elements -->
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
                <div class="absolute -top-24 -left-24 w-96 h-96 bg-blue-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                <div class="absolute top-1/2 -right-24 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
                <div class="absolute -bottom-24 left-1/2 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
            </div>
            
            <!-- Particle background -->
            <div id="particles-js" class="absolute inset-0 z-0"></div>

            <div class="relative z-10 max-w-4xl w-full space-y-16">
                <!-- Hero Section -->
                <div class="text-center animate-fade-in-up">
                    <h1 class="text-5xl md:text-7xl font-black text-white tracking-tight mb-6">
                        LGU <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">EEC</span> Platform
                    </h1>
                    <p class="text-xl md:text-2xl text-indigo-100 max-w-3xl mx-auto font-light leading-relaxed">
                        The comprehensive solution for Local Government Units to manage energy assets, track consumption, and drive conservation initiatives.
                    </p>
                </div>

                <!-- Login Card -->
                <div class="bg-white/10 backdrop-blur-xl p-10 rounded-3xl shadow-2xl border border-white/20 max-w-md mx-auto animate-fade-in-up animation-delay-500">
                    <div class="text-center mb-10">
                        <h2 class="text-3xl font-bold text-white mb-2">Welcome</h2>
                        <p class="text-indigo-200">Sign in to start managing your LGU's energy efficiency</p>
                    </div>
                    <button id="btn-google-login" class="flex items-center justify-center w-full bg-white rounded-2xl px-8 py-5 text-xl font-bold text-gray-800 hover:bg-indigo-50 transition-all transform hover:scale-[1.02] active:scale-[0.98] shadow-2xl group">
                        <img class="w-8 h-8 mr-4 group-hover:rotate-12 transition-transform" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
                        <span>Sign in with Google</span>
                    </button>
                </div>

                <!-- Storytelling Narrative -->
                <div class="animate-fade-in-up animation-delay-1000">
                    <div class="text-center mb-12">
                        <h3 class="text-3xl font-bold text-white mb-4">From Paperwork to Progress</h3>
                        <p class="text-indigo-200 text-lg max-w-3xl mx-auto">Our platform transforms the daily grind of EEC compliance into data-driven success.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Card 1: Asset Management -->
                        <div class="story-card bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8">
                            <div class="flex items-center gap-4 mb-4">
                                <svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>
                                <h4 class="text-xl font-bold text-white">Centralize Your Assets</h4>
                            </div>
                            <p class="text-indigo-200 leading-relaxed">
                                Move beyond scattered spreadsheets and dusty logbooks. Our platform provides a single source of truth for all energy-consuming assets, turning chaos into clarity and reclaiming hours wasted on administrative hunts.
                            </p>
                        </div>

                        <!-- Card 2: Consumption Tracking -->
                        <div class="story-card bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8">
                            <div class="flex items-center gap-4 mb-4">
                                <svg class="w-8 h-8 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                                <h4 class="text-xl font-bold text-white">Visualize Your Data</h4>
                            </div>
                            <p class="text-indigo-200 leading-relaxed">
                                Stop guessing about performance. Standardized digital logging eliminates error-prone manual entry and creates actionable dashboards. Instantly visualize month-over-month trends and spot anomalies with real-time data.
                            </p>
                        </div>

                        <!-- Card 3: SEU Identification -->
                        <div class="story-card bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8">
                            <div class="flex items-center gap-4 mb-4">
                                <svg class="w-8 h-8 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                <h4 class="text-xl font-bold text-white">Pinpoint Inefficiencies</h4>
                            </div>
                            <p class="text-indigo-200 leading-relaxed">
                                Our automated SEU identification uses historical averages and calculated ratings to transform guesswork into data-backed findings, showing you exactly where to focus your conservation efforts.
                            </p>
                        </div>

                        <!-- Card 4: Action Planning -->
                        <div class="story-card bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8">
                            <div class="flex items-center gap-4 mb-4">
                                <svg class="w-8 h-8 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                                <h4 class="text-xl font-bold text-white">Justify Your Projects</h4>
                            </div>
                            <p class="text-indigo-200 leading-relaxed">
                                Turn good ideas into approved projects. The platform provides contextual analytics and automated ROI calculations, building a compelling, data-driven business case that justifies investment and secures budgets.
                            </p>
                        </div>

                        <!-- Card 5: Compliance Reporting (Full Width) -->
                        <div class="story-card bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-8 md:col-span-2">
                            <div class="flex items-center gap-4 mb-4">
                                <svg class="w-8 h-8 text-rose-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                                <h4 class="text-xl font-bold text-white">Automate Your Reporting</h4>
                            </div>
                            <p class="text-indigo-200 leading-relaxed">
                                Reclaim weeks of work with a single click. Our dedicated reporting module generates formatted, submission-ready PDF reports for national agencies, freeing your team from tedious paperwork to focus on what truly matters: conservation.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="text-center text-indigo-300 text-sm pb-12 animate-fade-in-up animation-delay-1200">
                    <p>&copy; 2024 LGU Energy Efficiency and Conservation Platform. All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 bg-gray-800 text-gray-100 flex flex-col shadow-lg transition-all duration-300 overflow-hidden whitespace-nowrap">
            <div class="p-4 bg-gray-900">
                <h1 class="text-xl font-bold tracking-wider uppercase">LGU EEC</h1>
                <p class="text-xs text-gray-400">Energy Efficiency Platform</p>
            </div>

            <!-- LGU Context Selector -->
            <div class="p-4 border-b border-gray-700">
                <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Current LGU</label>
                <select id="lgu-selector" class="block w-full bg-gray-700 border border-gray-600 text-white py-2 px-3 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500 text-sm">
                    <option value="">Loading...</option>
                </select>
            </div>

            <nav class="flex-1 overflow-y-auto py-4">
                <ul class="space-y-1">
                    <li><a href="#/dashboard" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Dashboard</a></li>
                    <li><a href="#/fsbds" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Buildings (FSBD)</a></li>
                    <li><a href="#/vehicles" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Vehicles</a></li>
                    <li><a href="#/made" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Equipment (MADE)</a></li>
                    <li><a href="#/consumption" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Consumption</a></li>
                    <li><a href="#/seu" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">SEU Identification</a></li>
                    <li><a href="#/rios" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Recommendations</a></li>
                    <li><a href="#/ppas" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Projects (PPA)</a></li>
                    <li><a href="#/reporting" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">Compliance Report</a></li>
                    <li class="border-t border-gray-700 my-2"></li>
                    <li><a href="#/lgus" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">LGUs</a></li>
                    <li><a href="#/users" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">User Management</a></li>
                    <li><a href="#/admin" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white text-yellow-400">Admin Panel</a></li>
                    <li><a href="#/manual" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-700 hover:text-white">User Manual</a></li>
                    <li><button id="btn-logout" class="w-full text-left py-2.5 px-4 rounded transition duration-200 hover:bg-red-700 hover:text-white text-red-400">Logout</button></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <header class="flex items-center justify-between px-6 py-3 bg-white border-b border-gray-200 shadow-sm">
                <div class="flex items-center gap-4">
                    <button id="sidebar-toggle" class="text-gray-500 focus:outline-none hover:text-gray-700" title="Expand/Collapse Sidebar">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <h2 id="header-lgu-name" class="text-2xl font-bold text-gray-800"></h2>
                </div>
                <div id="header-user-info" class="hidden text-sm text-gray-600">
                    Signed in as <span id="header-user-name" class="font-semibold text-gray-800"></span>
                </div>
            </header>
            <main id="app-content" class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
                <!-- Dynamic Content Loaded Here -->
            </main>
        </div>
    </div>
    
    <!-- Particle.js -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

    <!-- App Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/api.js"></script>
    <script type="module" src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Particles.js
            particlesJS("particles-js", {
                "particles": {
                    "number": { "value": 60, "density": { "enable": true, "value_area": 800 } },
                    "color": { "value": "#ffffff" },
                    "shape": { "type": "circle" },
                    "opacity": { "value": 0.4, "random": true, "anim": { "enable": true, "speed": 1, "opacity_min": 0.1, "sync": false } },
                    "size": { "value": 3, "random": true, "anim": { "enable": false } },
                    "line_linked": { "enable": true, "distance": 150, "color": "#4f46e5", "opacity": 0.3, "width": 1 },
                    "move": { "enable": true, "speed": 2, "direction": "none", "random": true, "straight": false, "out_mode": "out", "bounce": false }
                },
                "interactivity": {
                    "detect_on": "canvas",
                    "events": {
                        "onhover": { "enable": true, "mode": "grab" },
                        "onclick": { "enable": true, "mode": "push" },
                        "resize": true
                    },
                    "modes": {
                        "grab": { "distance": 140, "line_linked": { "opacity": 0.7 } },
                        "bubble": { "distance": 400, "size": 40, "duration": 2, "opacity": 8, "speed": 3 },
                        "repulse": { "distance": 200, "duration": 0.4 },
                        "push": { "particles_nb": 4 },
                        "remove": { "particles_nb": 2 }
                    }
                },
                "retina_detect": true
            });

            // Sidebar Toggle Logic
            const toggleBtn = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            if (toggleBtn && sidebar) {
                toggleBtn.addEventListener('click', () => sidebar.classList.toggle('w-0'));
            }
        });
    </script>
</body>
</html>